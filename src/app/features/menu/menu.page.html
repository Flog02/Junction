<!-- src/app/features/menu/menu.page.html -->
<ion-header>
    <ion-toolbar color="primary">
      <ion-buttons slot="start">
        <ion-back-button defaultHref="/home"></ion-back-button>
      </ion-buttons>
      <ion-title>Menu</ion-title>
      
      <ion-buttons slot="end" *ngIf="orderService.getCartItems().length">
        <ion-button routerLink="/cart">
          <ion-icon name="cart-outline" slot="icon-only"></ion-icon>
          <ion-badge color="danger" *ngIf="orderService.getCartItems().length">
            {{ orderService.getCartItems().length }}
          </ion-badge>
        </ion-button>
      </ion-buttons>
    </ion-toolbar>
    
    <!-- Table order indicator -->
    <div class="table-order-banner" *ngIf="isTableOrder">
      <ion-icon name="restaurant-outline"></ion-icon>
      <span>Table Order: #{{ tableNumber }}</span>
    </div>
  </ion-header>
  
  <ion-content>
    <!-- Category Navigation -->
    <div class="category-nav">
      <div 
        *ngFor="let category of categories" 
        class="category-item" 
        [class.active]="selectedCategory === category.id"
        (click)="onCategorySelect(category.id)"
      >
        <ion-icon [name]="category.icon"></ion-icon>
        <span>{{ category.name }}</span>
      </div>
    </div>
    
    <!-- Featured Section (only show on coffee category) -->
    <div *ngIf="selectedCategory === 'coffee' && featuredProducts.length > 0" class="featured-section">
      <h2 class="section-title">Featured Drinks</h2>
      
      <div class="featured-scroll">
        <div *ngFor="let product of featuredProducts" class="featured-item">
          <div class="product-image-container">
            <img [src]="product.imageURL" [alt]="product.name" class="product-image">
            <div class="featured-badge">Featured</div>
          </div>
          <div class="featured-content">
            <h3>{{ product.name }}</h3>
            <p class="product-description">{{ product.description }}</p>
            <div class="featured-footer">
              <span class="product-price">{{ product.price | currency }}</span>
              <ion-button fill="clear" (click)="onCustomize(product)">
                Customize
              </ion-button>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Main Menu Section -->
    <div class="menu-section">
      <h2 class="section-title">{{ selectedCategory | titlecase }}</h2>
      
      <!-- Loading indicator -->
      <div *ngIf="isLoading" class="loading-container">
        <ion-spinner name="circles"></ion-spinner>
        <p>Loading menu items...</p>
      </div>
      
      <!-- Empty state -->
      <div *ngIf="!isLoading && products.length === 0" class="empty-state">
        <ion-icon [name]="getCategoryIcon(selectedCategory)"></ion-icon>
        <p>No items available in this category at the moment.</p>
      </div>
      
      <!-- Product grid -->
      <div *ngIf="!isLoading && products.length > 0" class="product-grid">
        <ion-card *ngFor="let product of products" class="product-card">
          <div class="product-image-container">
            <img [src]="product.imageURL" [alt]="product.name" class="product-image">
            <div *ngIf="product.featured" class="product-badge featured">Featured</div>
          </div>
          
          <ion-card-header>
            <ion-card-title>{{ product.name }}</ion-card-title>
            <ion-card-subtitle *ngIf="product.category === 'coffee'">{{ product.category }}</ion-card-subtitle>
          </ion-card-header>
          
          <ion-card-content>
            <p class="product-description">{{ product.description }}</p>
            
            <div class="nutrition-info" *ngIf="product.nutritionInfo">
              <span class="nutrition-item">
                <ion-icon name="flame-outline"></ion-icon>
                {{ product.nutritionInfo.calories }} cal
              </span>
              
              <span class="nutrition-item" *ngIf="product.category === 'coffee'">
                <ion-icon name="cafe-outline"></ion-icon>
                {{ product.nutritionInfo.caffeine }}mg
              </span>
            </div>
            
            <div class="product-footer">
              <span class="product-price">{{ product.price | currency }}</span>
              
              <div class="product-actions">
                <ion-button fill="clear" (click)="onCustomize(product)">
                  <ion-icon name="options-outline" slot="start"></ion-icon>
                  Customize
                </ion-button>
                
                <ion-button (click)="onAddToCart(product)">
                  <ion-icon name="add" slot="icon-only"></ion-icon>
                </ion-button>
              </div>
            </div>
          </ion-card-content>
        </ion-card>
      </div>
    </div>
    
    <!-- FAB for cart -->
    <ion-fab vertical="bottom" horizontal="end" slot="fixed" *ngIf="orderService.getCartItems().length">
      <ion-fab-button routerLink="/cart">
        <ion-icon name="cart-outline"></ion-icon>
      </ion-fab-button>
    </ion-fab>
  </ion-content>